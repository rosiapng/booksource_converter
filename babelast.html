<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Deobfuscator</title>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/@babel/parser"></script>
    <script src="https://unpkg.com/@babel/traverse"></script>
    <script src="https://unpkg.com/@babel/generator"></script>
</head>
<body>
    <h2>JavaScript Deobfuscator</h2>
    <textarea id="inputCode" rows="10" cols="50" placeholder="Paste obfuscated JavaScript here"></textarea>
    <br>
    <button onclick="deobfuscate()">Deobfuscate</button>
    <h3>Deobfuscated Code:</h3>
    <pre id="outputCode"></pre>

    <script>
        function deobfuscate() {
    const inputCode = document.getElementById("inputCode").value;

    try {
        // Parse code to AST
        const ast = Babel.parse(inputCode);

        // Dead Code Removal: Traverse AST
        Babel.traverse(ast, {
            VariableDeclarator(path) {
                // Remove unused variables
                const binding = path.scope.getBinding(path.node.id.name);
                if (binding && binding.references === 0) {
                    path.remove();
                }
            },
            IfStatement(path) {
                // Remove `if (false) { ... }` or `if (0) { ... }`
                if (path.node.test.type === "BooleanLiteral" && !path.node.test.value) {
                    path.remove();
                }
            },
            ExpressionStatement(path) {
                // Remove redundant expressions like `0;` or `"test";`
                if (path.node.expression.type === "NumericLiteral" || path.node.expression.type === "StringLiteral") {
                    path.remove();
                }
            },
            ReturnStatement(path) {
                // Remove unreachable code after return
                let next = path.getSibling(path.key + 1);
                while (next.node) {
                    next.remove();
                    next = path.getSibling(next.key + 1);
                }
            }
        });

        // Generate readable JavaScript
        const output = Babel.transformFromAstSync(ast, inputCode, { 
            presets: ['env'],
            retainLines: true
        }).code;

        document.getElementById("outputCode").textContent = output;
    } catch (err) {
        document.getElementById("outputCode").textContent = "Error: " + err.message;
    }
}
    </script>
</body>
</html>