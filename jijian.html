<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>傻瓜极简写源工具</title>
    <link rel="stylesheet" href="https://rosiapng.github.io/booksource_converter/css/index_styles.css">
</head>
<body>
<!-- Navigation Links in Button Form -->
    <h2 class="big-title">傻瓜极简写源工具</h2>
    <p class="author">By 小猫咪Rosia P'ng</p>

        <div class="nav-box">
         <nav>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/index.html">书源语法转换器(xpath,css)</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/manyajs.html">傻瓜式益达转漫鸭正文JS器</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/jijian.html">傻瓜极简写源工具</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/jjfen.html">极简源发现工具</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/yuedu.html">阅读源发现格式转换极简源发现</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/beuti.html">美化Json和JS</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/code.html">Js测试</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/base64.html">Base64和URI decode</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/aes.html">Crypto AES解密测试</a>
           <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/upload.html">上载极简仓库资料准备</a>
        
        </nav>
    </div>
    
    <h1>极简Params转Json器</h1>
    <p>可以把query转成JSON</p>

    <!-- Input Box for Query String -->
    <div class="input-container">
        <label for="queryStringInput">Param:</label>
        <textarea id="queryStringInput" rows="4" placeholder="Enter the query string"></textarea>
        <button onclick="convertToJSON()">转JSON</button>
        <button onclick="clearInput('queryStringInput')">清空</button>
    </div>

    <!-- Output Box for JSON Format -->
    <div class="input-container">
        <label for="jsonOutput">转 JSON:</label>
        <textarea id="jsonOutput" rows="6" placeholder="转Json格式" readonly></textarea>
        <button onclick="copyOutput('jsonOutput')">复制</button>
    </div>

    <h1>把xpath转换成前置xpath的格式</h1>
    <p>把xpath改成前置的xpath格式,把"换成'</p>

    <!-- Input Box for XPath with Double Quotes -->
    <div class="input-container">
        <label for="doubleQuoteInput">Xpath格式:</label>
        <textarea id="doubleQuoteInput" rows="4" placeholder='//div[@class="intro indent"]'></textarea>
        <button onclick="convertQuotes()">转换前置Xpath格式</button>
        <button onclick="clearInput('doubleQuoteInput')">清空</button>
    </div>

    <!-- Output Box for XPath with Single Quotes -->
    <div class="input-container">
        <label for="singleQuoteOutput">前置XPath格式:</label>
        <textarea id="singleQuoteOutput" rows="4" placeholder="Converted XPath will appear here" readonly></textarea>
        <button onclick="copyOutput('singleQuoteOutput')">复制</button>
    </div>

   <h1>URL-encoded 转 GBK</h1>
    <p>输入URL编码字符串并将其转换为GBK编码</p>

    <!-- Input Box for URL-encoded string -->
    <div class="input-container">
        <label for="urlEncodedInput">URL编码字符串:</label>
        <textarea id="urlEncodedInput" rows="4" placeholder="%CB%D1%CB%F7"></textarea>
        <button onclick="convertToGBK()">转换为GBK</button>
        <button onclick="clearInput('urlEncodedInput')">清空</button>
    </div>

    <!-- Output Box for GBK-decoded string -->
    <div class="input-container">
        <label for="gbkOutput">GBK字符串:</label>
        <textarea id="gbkOutput" rows="4" placeholder="GBK解码结果" readonly></textarea>
        <button onclick="copyOutput('gbkOutput')">复制</button>
    </div>
    
                <script src="https://rosiapng.github.io/booksource_converter/js/convert.js">
        
    </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/encoding-japanese/1.0.30/encoding.js"></script>
    <script>
        function convertToGBK() {
            const input = document.getElementById("urlEncodedInput").value;
            try {
                // Decode URL-encoded string to raw bytes
                const byteString = decodeURIComponent(input);
                
                // Convert the byte string to a byte array
                const byteArray = [];
                for (let i = 0; i < byteString.length; i++) {
                    byteArray.push(byteString.charCodeAt(i) & 0xFF);
                }

                // Use encoding.js to decode the byte array from GBK encoding
                const gbkDecoded = Encoding.convert(byteArray, {
                    to: 'UNICODE',  // Convert to Unicode
                    from: 'GBK'     // Source is GBK
                });

                // Convert the decoded byte array into a readable string
                const gbkString = Encoding.codeToString(gbkDecoded);

                // Display the GBK-decoded string
                document.getElementById("gbkOutput").value = gbkString;
            } catch (e) {
                document.getElementById("gbkOutput").value = "Error decoding input.";
            }
        }
 </script>
</body>
</html>
