<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Query String to JSON Converter</title>
    <link rel="stylesheet" href="https://rosiapng.github.io/booksource_converter/css/index_styles.css">
</head>
<body>
<!-- Navigation Links in Button Form -->
    <h2 class="big-title">傻瓜极简写源工具</h2>
    <p class="author">By 小猫咪Rosia P'ng</p>

        <div class="nav-box">
        <nav>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/index.html">书源语法转换器(xpath,css)</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/manyajs.html">傻瓜式益达转漫鸭正文JS器</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/jijian.html">傻瓜极简写源工具</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/jjfen.html">极简源发现工具</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/yuedu.html">阅读源发现格式转换极简源发现</a>
        
        </nav>
    </div>
    
    <h1>极简Params转Json器</h1>
    <p>可以把query转成JSON</p>

    <!-- Input Box for Query String -->
    <div class="input-container">
        <label for="queryStringInput">Param:</label>
        <textarea id="queryStringInput" rows="4" placeholder="Enter the query string"></textarea>
        <button onclick="convertToJSON()">转JSON</button>
        <button onclick="clearInput('queryStringInput')">清空</button>
    </div>

    <!-- Output Box for JSON Format -->
    <div class="input-container">
        <label for="jsonOutput">转 JSON:</label>
        <textarea id="jsonOutput" rows="6" placeholder="转Json格式" readonly></textarea>
        <button onclick="copyOutput('jsonOutput')">复制</button>
    </div>

    <h1>把xpath转换成前置xpath的格式</h1>
    <p>把xpath改成前置的xpath格式,把"换成'</p>

    <!-- Input Box for XPath with Double Quotes -->
    <div class="input-container">
        <label for="doubleQuoteInput">Xpath格式:</label>
        <textarea id="doubleQuoteInput" rows="4" placeholder='//div[@class="intro indent"]'></textarea>
        <button onclick="convertQuotes()">转换前置Xpath格式</button>
        <button onclick="clearInput('doubleQuoteInput')">清空</button>
    </div>

    <!-- Output Box for XPath with Single Quotes -->
    <div class="input-container">
        <label for="singleQuoteOutput">前置XPath格式:</label>
        <textarea id="singleQuoteOutput" rows="4" placeholder="Converted XPath will appear here" readonly></textarea>
        <button onclick="copyOutput('singleQuoteOutput')">复制</button>
    </div>

    <script>
        // Function to handle both query strings and key-value pairs
        function convertToJSON() {
            const input = document.getElementById('queryStringInput').value.trim();
            const jsonObject = {};

            if (input.includes('=') && !input.includes(':')) {
                // Handle query string format (e.g., searchkey=%E9%97%AA%E5%A9%9A&Submit=)
                const params = new URLSearchParams(input);
                for (const [key, value] of params.entries()) {
                    jsonObject[key] = decodeURIComponent(value);
                }
            } else {
                // Handle key-value pair format (e.g., searchkey: 都市, searchtype: articlename)
                const lines = input.split('\n');
                lines.forEach(line => {
                    if (line.includes(':')) {
                        const [key, value] = line.split(/:(.*)/).map(str => str.trim()); // Split only at the first colon
                        jsonObject[key] = value ? value.trim() : ''; // Assign empty string if value is missing
                    }
                });
            }

            // Output the JSON result
            document.getElementById('jsonOutput').value = JSON.stringify(jsonObject, null, 4);
        }

        // Function to convert double quotes to single quotes
        function convertQuotes() {
            const input = document.getElementById('doubleQuoteInput').value;

            // Replace all double quotes with single quotes
            const converted = input.replace(/"/g, "'");

            // Output the converted result
            document.getElementById('singleQuoteOutput').value = converted;
        }
        
        // Function to clear the input field
        function clearInput(inputId) {
            document.getElementById(inputId).value = '';
        }

        function copyOutput(outputId) {
    const outputElement = document.getElementById(outputId);
    outputElement.select();
    outputElement.setSelectionRange(0, 99999); // For mobile devices
    document.execCommand("copy");
    // Removed the alert
}
    </script>

</body>
</html>
