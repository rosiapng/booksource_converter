<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML to JSON Converter</title>
<link rel="stylesheet" href="https://rosiapng.github.io/booksource_converter/css/index_styles.css">
</head>
<body>
<!-- Navigation Links in Button Form -->
    <h2 class="big-title">极简源发现转换工具</h2>
    <p class="author">By 小猫咪Rosia P'ng</p>
    
    <div class="nav-box">
        <nav>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/index.html">书源语法转换器(xpath,css)</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/manyajs.html">傻瓜式益达转漫鸭正文JS器</a>
            <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/jijian.html">傻瓜极简写源工具</a>
                        <a class="nav-button" href="https://rosiapng.github.io/booksource_converter/jjfen.html">极简源发现工具</a>
        </nav>
    </div>
    
<h1>极简源发现转换工具<h1>
<p>Paste the HTML list below and click "Convert to JSON" to get the JSON format.</p>

<!-- Input Box for HTML List -->
<div class="input-container">
    <label for="htmlInput">HTML Input:</label>
    <textarea id="htmlInput" rows="10" placeholder='<li class="prev"><a id="s1" href="/fenlei/1/1.html">玄幻</a></li>'></textarea>
    <button onclick="convertHtmlToJson()">Convert to JSON</button>
    <button onclick="clearInput('htmlInput')">Clear</button>
</div>

<!-- Output Box for JSON Format -->
<div class="input-container">
    <label for="jsonOutput">JSON Output:</label>
    <textarea id="jsonOutput" rows="10" readonly placeholder="Converted JSON will appear here"></textarea>
    <button onclick="copyOutput('jsonOutput')">Copy to Clipboard</button>
</div>

<script>
     function convertHtmlToJson() {
        const input = document.getElementById('htmlInput').value;
        const parser = new DOMParser();
        const doc = parser.parseFromString(input, 'text/html');
        const listItems = doc.querySelectorAll('li a');
        const jsonArray = [];

        listItems.forEach(item => {
            const name = item.textContent.trim();  // Extract visible text (name)
            const value = item.getAttribute('href'); // Extract href attribute and rename it to 'value'

            jsonArray.push({ name, value });
        });

        document.getElementById('jsonOutput').value = JSON.stringify(jsonArray, null, 4);
    }
    
    function copyOutput(outputId) {
        const outputElement = document.getElementById(outputId);
        outputElement.select();
        document.execCommand('copy');
        alert('Copied to clipboard!');
    }
</script>

</body>
</html>